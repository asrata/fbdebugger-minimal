Unmodified mostly from fblualib version. Only change is hardcoding `"libedit"` as the argument to the ffi loader, which should be fine in almost all cases if libedit is properly installed globally.
